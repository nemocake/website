<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Collection | con.rad">
  <title>Collection | con.rad</title>

  <!-- Google Fonts for Font Testing Tool -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=IBM+Plex+Sans:ital,wght@0,400;0,500;0,600;1,400&family=Inter:wght@400;500;600;700&family=Lato:ital,wght@0,400;0,700;1,400&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400;0,500;0,600;1,400&family=Merriweather:ital,wght@0,400;0,700;1,400&family=Montserrat:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Open+Sans:ital,wght@0,400;0,500;0,600;1,400&family=Oswald:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Poppins:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Roboto:ital,wght@0,400;0,500;0,700;1,400&family=Source+Serif+4:ital,wght@0,400;0,500;0,600;1,400&family=Space+Grotesk:wght@400;500;600;700&family=Work+Sans:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="../assets/css/variables.css">
  <link rel="stylesheet" href="../assets/css/reset.css">
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/layout.css">
  <link rel="stylesheet" href="../assets/css/components.css">
  <link rel="stylesheet" href="../assets/css/utilities.css">

  <!-- Config Loader -->
  <script src="../assets/js/config-loader.js"></script>

  <!-- Fallback config for file:// protocol or stale data -->
  <script>
    // Check if config exists and has the 'type' field (not stale data)
    const hasValidConfig = window.SITE_CONFIG &&
                           window.SITE_CONFIG.collection &&
                           window.SITE_CONFIG.collection.length > 0 &&
                           window.SITE_CONFIG.collection[0].type;
    if (!hasValidConfig) {
      console.log('[Collection] Using embedded fallback config (missing or stale data)');
      window.SITE_CONFIG = window.SITE_CONFIG || {};
      window.SITE_CONFIG.collection = [
        {"thumbnail":"https://ipfs.io/ipfs/QmQV57honsnKiWnsgRikU43WL5h4tk2eSi9QcsaphBiSsJ","render":"https://ipfs.io/ipfs/QmQV57honsnKiWnsgRikU43WL5h4tk2eSi9QcsaphBiSsJ","title":"CSRSNT-ZAAI-45-of-64.png","artist":"Caesuras (Casey Reas)","medium":"Digital Art","type":"image","description":"always been enamored by casey's work. the depth and intricacies of his pieces from seemingly simple diagonal lines and dashes. takes a special eye to be able to imagine, create and express these aesthetics, casey's eye has always been a favorite of mine."},
        {"thumbnail":"https://ipfs.io/ipfs/QmTdTi3ctvT1Npcp6eKDuN1notyZoVJuTYK6iRivcKpW8V","render":"https://ipfs.io/ipfs/QmTdTi3ctvT1Npcp6eKDuN1notyZoVJuTYK6iRivcKpW8V","title":"The Starry Night: Not Van Gogh, Not Sorry","artist":"Helena Sarin","medium":"Digital Art","type":"image","description":"gans have always been my favorite sub-genre of AI, machine-learning, generative, or 'whatever u want to call it' art. fondness for simpler, more personalized systems. early gan outputs allowed more room for contemplation, emotions, and freedom for the machines to dream. there's a rawness to gans, an aesthetic that feels refreshing and incomparable to other artistic explorations. helena's work with gans is the perfect representation of this.... her style, emotions, story and so much more is expressed through her systems, digitally and physically."},
        {"thumbnail":"https://ipfs.io/ipfs/QmSRtLFUF39tsj639EsAk1uZKRCDvYMGHcCQwsqdqpiXMs","render":"https://ipfs.io/ipfs/QmSRtLFUF39tsj639EsAk1uZKRCDvYMGHcCQwsqdqpiXMs","title":"Lushtemples — landscape in dark tones","artist":"Zancan","medium":"Digital Art","type":"image","description":"say what you want about how skeuomorphic or not digital art should or shouldnt be. zancan crafted something special with his early tezos forestry. an artist that captured an entire chain and is a big reason for helping pushing our niche art nerd scene forward just a little more."},
        {"thumbnail":"https://assets.objkt.media/file/assets-003/KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton/124016/thumb288","render":"https://ipfs.io/ipfs/QmbsDwhx7saoCcAUsqrEfRZwa4iEm6KBgQZQFsNp885mFB","title":"Window Still Life 064","artist":"John Karel","medium":"Digital Art","type":"video","description":"my partner first recognized john's work from early tumblr days, we became active collectors of his daily windows throughout the early hicetnunc days. fond memories of auto-refreshing tzkt pages, waiting for a mint operations to come through… this one has always been a personal favorite, reminds me of my brother and the countless hours we'd share in front of split-screen tvs."},
        {"thumbnail":"https://i2c.seadn.io/shape/0xbb8f2711bd4bc98223990267f771e97d2d9bc167/e1f7e0b99bfceb22880207a3b9c8b9/b0e1f7e0b99bfceb22880207a3b9c8b9.png?w=350","render":"https://raw2.seadn.io/shape/0xbb8f2711bd4bc98223990267f771e97d2d9bc167/f25af6a194cf28dc386b56d03c602f/c3f25af6a194cf28dc386b56d03c602f.html","title":"Infinite Garden: 12879 Flowers","artist":"Leander Herzog","medium":"Digital Art","type":"iframe","description":"leander's infinite garden series is a beautiful example of protocol art. becoming the gardener of the digital floral arrangement through online contracts. leander doesn't shy away from hard edges, there's no rush towards realism, but rather a meditative retreat in a field of polygons. cool guy makes cool artwork."},
        {"thumbnail":"https://ipfs.io/ipfs/QmbrgWFtkajrX8nhDfMNwFo3MnBBZraRHE9pHCki1DjwCd","render":"https://onchfs.fxhash2.xyz/046f4712c2aaa344f82f1ef8ffed2ab8c9714819228e29c6a28cf67b14377f61/?cid=onchfs%3A%2F%2F046f4712c2aaa344f82f1ef8ffed2ab8c9714819228e29c6a28cf67b14377f61&fxhash=0x90ec40ca1678bb224479e39903cd6f9350118d924d00dda1b7eadf4512d17921&fxminter=0x4d477F1aabcFc2FC3FC9b802E861C013E0123AD9&fxiteration=369&fxcontext=standalone&fxchain=ETHEREUM&legacy=false","title":"Genomes #369","artist":"Ciphrd and Alexander Mordvintsev","medium":"Digital Art","type":"iframe","description":"one of the most under-appreciated projects in the space. such a lovely blend of aesthetics between two legends, mordvinstev and ciphrds ability to create a procedural system that is reminiscent of the early deepdream textures is *chefs kiss*. can sit and watch this living genome evolve forever."},
        {"thumbnail":"https://artblocks-mainnet.s3.amazonaws.com/28000842.png","render":"https://artblocks-mainnet.s3.amazonaws.com/28000842.png","title":"Apparitions #842","artist":"Aaron Penne","medium":"Digital Art","type":"image","description":"just a special piece from early days of collecting, surrounded with seemingly nostalgic and fond memories. my partner and i have always said our colors are green and pink, this piece reminds me of her. <3"},
        {"thumbnail":"https://assets.objkt.media/file/assets-003/KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton/211749/thumb288","render":"https://ipfs.io/ipfs/Qma5mbRphoPR8aZYNmmKbEkZyKyhQq2UmuY1rR657q6AHZ","title":"fl(uu)f. luluxxx","artist":"luluxxx","medium":"Digital Art","type":"image","description":"lulu is an og in the cryptoart space. part of the larger p(jj)tch series, these cat gifs are always a dopamine injection. whatever ascii filter/style transfer system lulu has built is a work of art in itself, a signature style thats unforgettable. also who doesnt love cats?"},
        {"thumbnail":"https://assets.objkt.media/file/assets-003/KT1ADXimsk468U1kZfuxiSQuncDsRftPFKrk/24/thumb288","render":"https://ipfs.io/ipfs/QmUrJFJsyz3yE19xJdcrqzioJBws8Zy1851pxiX2DvUYUh","title":"Standard Deck 022","artist":"Elna Frederick","medium":"Digital Art","type":"image","description":"elna's illusionary flashing style is such a neat way of conveying motion. all the cards within the standard deck series have a life, a scene, a feeling. i like to imagine the band is playing tezeta by mulatu astatke"}
      ];
      // Update localStorage with correct data
      try { localStorage.setItem('conradCollection', JSON.stringify(window.SITE_CONFIG.collection)); } catch(e) {}
    }
  </script>

  <style>
    /* ==========================================================================
       CUSTOM FONTS
       ========================================================================== */
    @font-face {
      font-family: 'Kiya';
      src: url('../assets/fonts/kiya/Kiya Handwrite.woff2') format('woff2'),
           url('../assets/fonts/kiya/Kiya Handwrite.woff') format('woff'),
           url('../assets/fonts/kiya/Kiya Handwrite.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    /* ==========================================================================
       GALLERY VIEW STYLES
       Museum-inspired artwork viewing experience
       ========================================================================== */

    :root {
      --gallery-bg: #f8f8f6;
      --gallery-wall: #ffffff;
      --plaque-bg: #fafaf8;
      --plaque-border: #e8e8e4;
      --text-primary: #1a1a1a;
      --text-secondary: #666666;
      --text-tertiary: #999999;
      --frame-shadow: 0 8px 40px rgba(0, 0, 0, 0.12), 0 2px 12px rgba(0, 0, 0, 0.08);
      --plaque-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
    }

    /* Page Layout - Fixed view, no scroll */
    body {
      background: var(--gallery-bg);
      height: 100vh;
      overflow: hidden;
    }

    .gallery-page {
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }

    /* Header - Floating transparent style */
    .gallery-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      height: 5rem;
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: var(--space-8);
      align-items: center;
      padding: 0 var(--space-6);
      background: transparent;
      transition: background 0.3s ease;
    }

    /* Remove scroll background - keep transparent */
    .gallery-header.scrolled {
      background: transparent;
      backdrop-filter: none;
    }

    /* Floating nav link treatment */
    .gallery-nav-link {
      text-shadow:
        0 1px 3px rgba(255, 255, 255, 0.9),
        0 0 15px rgba(255, 255, 255, 0.4);
    }

    .gallery-nav-link:hover {
      text-shadow:
        0 2px 6px rgba(255, 255, 255, 1),
        0 0 25px rgba(255, 255, 255, 0.6);
    }

    .gallery-logo-name {
      text-shadow:
        0 1px 3px rgba(255, 255, 255, 0.9),
        0 0 20px rgba(255, 255, 255, 0.5);
    }

    .gallery-logo-tagline {
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
    }

    .gallery-nav-left,
    .gallery-nav-right {
      display: flex;
      align-items: center;
      gap: var(--space-8);
    }

    .gallery-nav-left {
      justify-content: flex-end;
    }

    .gallery-nav-right {
      justify-content: flex-start;
    }

    .gallery-nav-link {
      font-family: 'Libre Baskerville', serif;
      font-size: var(--font-size-sm);
      color: var(--text-secondary);
      text-decoration: none;
      letter-spacing: 0.01em;
      text-transform: lowercase;
      transition: color 0.2s ease;
    }

    .gallery-nav-link:hover {
      color: var(--text-primary);
    }

    .gallery-logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
    }

    .gallery-logo-name {
      font-family: 'Kiya', sans-serif;
      font-size: 1.5rem;
      font-weight: normal;
      color: var(--text-primary);
    }

    .gallery-logo-tagline {
      font-size: 0.7rem;
      font-weight: 400;
      color: var(--text-tertiary);
      letter-spacing: 0.02em;
    }

    .gallery-logo:hover .gallery-logo-name {
      color: var(--color-accent);
    }

    @media (max-width: 768px) {
      .gallery-header {
        display: flex;
        justify-content: center;
        height: 4rem;
      }

      .gallery-nav-left,
      .gallery-nav-right {
        display: none;
      }
    }

    /* Main Gallery Area */
    .gallery-main {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      padding: 0;
      overflow: hidden;
    }

    /* Artwork Container */
    .artwork-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* Simple frame - just adds shadow */
    .artwork-frame {
      background: var(--gallery-wall);
      border-radius: 2px;
      box-shadow: var(--frame-shadow);
      line-height: 0;
    }

    /* Image container */
    .artwork-inner {
      line-height: 0;
    }

    /* Images: fit within viewport while maintaining aspect ratio */
    .artwork-inner img {
      display: block;
      max-width: 90vw;
      max-height: 80vh;
      width: auto;
      height: auto;
      object-fit: contain;
    }

    /* Iframes need explicit sizing with max-height like images/videos */
    .artwork-frame--iframe {
      width: 90vw;
      max-width: 1200px;
    }

    .artwork-frame--iframe .artwork-inner {
      width: 100%;
      max-height: 80vh;
      aspect-ratio: var(--artwork-aspect-ratio, 1 / 1);
    }

    .artwork-frame--iframe .artwork-inner iframe {
      width: 100%;
      height: 100%;
      max-height: 80vh;
      border: none;
    }

    /* Video: fit within viewport like images */
    .artwork-inner video {
      display: block;
      max-width: min(90vw, calc(100vw - 160px)); /* Leave room for side navigation */
      max-height: 80vh;
      width: auto;
      height: auto;
      object-fit: contain;
      background: #000;
      border-radius: 2px;
    }

    /* Loading State - only shows for iframes */
    .artwork-loading {
      display: none;
    }

    .artwork-frame--iframe .artwork-loading {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0a0a0a;
      color: #666;
      font-size: var(--font-size-sm);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .artwork-loading::after {
      content: 'Loading';
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 1; }
    }

    /* Museum Plaque - fixed bottom left, floating text */
    .artwork-plaque {
      position: fixed;
      bottom: var(--space-8);
      left: var(--space-8);
      max-width: 300px;
      padding: 0;
      background: transparent;
      text-align: left;
      z-index: 50;
    }

    /* Artwork Description - dynamically positioned by JS */
    .artwork-sidebar {
      position: fixed;
      top: 50%;
      right: 60px; /* Fallback, JS will override */
      transform: translateY(-50%);
      max-width: 220px;
      max-height: 50vh;
      overflow-y: auto;
      padding: 0;
      background: transparent;
      z-index: 50;
      transition: right 0.3s ease, max-width 0.3s ease;
    }

    .artwork-sidebar:empty,
    .artwork-sidebar[data-empty="true"] {
      display: none;
    }

    .sidebar-label {
      font-family: 'Libre Baskerville', serif;
      font-size: 11px;
      font-weight: 400;
      color: #1a1a1a;
      text-transform: lowercase;
      letter-spacing: 0.02em;
      margin: 0 0 var(--space-4) 0;
      opacity: 0.5;
    }

    .sidebar-text {
      font-family: 'Libre Baskerville', serif;
      font-size: 13px;
      line-height: 1.8;
      color: #1a1a1a;
      margin: 0;
      font-weight: 400;
      letter-spacing: 0.015em;
    }

    .sidebar-text p {
      margin: 0 0 var(--space-4) 0;
    }

    .sidebar-text p:last-child {
      margin-bottom: 0;
    }

    /* Subtle scrollbar for sidebar */
    .artwork-sidebar::-webkit-scrollbar {
      width: 2px;
    }

    .artwork-sidebar::-webkit-scrollbar-track {
      background: transparent;
    }

    .artwork-sidebar::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.1);
      border-radius: 1px;
    }

    .artwork-sidebar::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 0, 0, 0.2);
    }

    .plaque-title {
      font-family: 'Libre Baskerville', serif;
      font-size: 15px;
      font-weight: 400;
      font-style: italic;
      color: #1a1a1a;
      margin: 0 0 var(--space-2) 0;
      line-height: 1.4;
      letter-spacing: 0.01em;
    }

    .plaque-artist {
      font-family: 'Libre Baskerville', serif;
      font-size: 13px;
      font-weight: 400;
      color: #1a1a1a;
      margin: 0;
      letter-spacing: 0.015em;
    }

    .plaque-details {
      display: none;
    }

    /* Writing/Description Section */
    .artwork-description {
      max-width: 600px;
      width: 100%;
      margin-top: var(--space-12);
      padding-top: var(--space-8);
      border-top: 1px solid var(--plaque-border);
    }

    .description-content {
      font-size: var(--font-size-base);
      line-height: 1.8;
      color: var(--text-secondary);
    }

    .description-content p {
      margin: 0 0 var(--space-4) 0;
    }

    .description-content p:last-child {
      margin-bottom: 0;
    }

    /* Side Navigation */
    .side-nav {
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      z-index: 100;
      pointer-events: auto;
    }

    .side-nav--prev {
      left: var(--space-6);
    }

    .side-nav--next {
      right: var(--space-6);
    }

    .side-nav-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      background: transparent;
      border: none;
      color: #1a1a1a;
      cursor: pointer;
      transition: all 0.2s ease;
      opacity: 0.3;
      pointer-events: auto;
      position: relative;
      z-index: 101;
    }

    .side-nav-btn:hover {
      opacity: 0.8;
    }

    .side-nav-btn:disabled {
      opacity: 0.1;
      cursor: not-allowed;
    }

    .side-nav-btn svg {
      width: 24px;
      height: 24px;
    }

    /* Counter at bottom center */
    .gallery-counter {
      position: fixed;
      bottom: var(--space-6);
      left: 50%;
      transform: translateX(-50%);
      font-size: 11px;
      color: #1a1a1a;
      opacity: 0.4;
      letter-spacing: 0.1em;
      z-index: 50;
    }

    /* View Controls */
    .view-controls {
      position: fixed;
      bottom: var(--space-6);
      right: var(--space-6);
      display: flex;
      gap: var(--space-2);
      z-index: 50;
    }

    .view-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--gallery-wall);
      border: 1px solid var(--plaque-border);
      border-radius: 50%;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: var(--plaque-shadow);
    }

    .view-btn:hover {
      background: var(--text-primary);
      color: var(--gallery-wall);
      border-color: var(--text-primary);
    }

    .view-btn svg {
      width: 18px;
      height: 18px;
    }

    /* Fullscreen Mode */
    body.fullscreen-mode .gallery-header,
    body.fullscreen-mode .artwork-plaque,
    body.fullscreen-mode .artwork-sidebar,
    body.fullscreen-mode .artwork-description,
    body.fullscreen-mode .side-nav,
    body.fullscreen-mode .gallery-counter {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    body.fullscreen-mode .gallery-main {
      padding: 0;
      max-width: none;
    }

    body.fullscreen-mode .artwork-frame {
      max-width: none;
      width: 100vw;
      height: 100vh;
      border-radius: 0;
      box-shadow: none;
    }

    body.fullscreen-mode .artwork-inner {
      aspect-ratio: unset;
      height: 100%;
    }

    body.fullscreen-mode .view-controls {
      opacity: 0.3;
      transition: opacity 0.3s ease;
    }

    body.fullscreen-mode .view-controls:hover {
      opacity: 1;
    }

    /* Empty State */
    .gallery-empty {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 60vh;
      text-align: center;
      color: var(--text-tertiary);
    }

    .gallery-empty-icon {
      width: 64px;
      height: 64px;
      margin-bottom: var(--space-4);
      opacity: 0.3;
    }

    .gallery-empty-text {
      font-size: var(--font-size-sm);
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    /* Grid View Mode - Masonry Layout */
    .gallery-grid {
      display: none;
      padding: calc(80px + var(--space-8)) var(--space-6) var(--space-8);
      max-width: 1600px;
      margin: 0 auto;
      width: 100%;
    }

    .gallery-grid-inner {
      column-count: 4;
      column-gap: var(--space-3);
    }

    @media (max-width: 1200px) {
      .gallery-grid-inner {
        column-count: 3;
      }
    }

    @media (max-width: 900px) {
      .gallery-grid-inner {
        column-count: 2;
      }
    }

    @media (max-width: 480px) {
      .gallery-grid-inner {
        column-count: 1;
      }
    }

    .gallery-grid-item {
      position: relative;
      break-inside: avoid;
      margin-bottom: var(--space-3);
      background: var(--gallery-wall);
      border-radius: 4px;
      overflow: hidden;
      box-shadow: var(--plaque-shadow);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .gallery-grid-item:hover {
      transform: translateY(-4px);
      box-shadow: var(--frame-shadow);
    }

    .gallery-grid-item img {
      display: block;
      width: 100%;
      height: auto;
      transition: transform 0.4s ease;
    }

    .gallery-grid-item:hover img {
      transform: scale(1.03);
    }

    .gallery-grid-item__overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: var(--space-4);
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.75));
      color: #fff;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .gallery-grid-item:hover .gallery-grid-item__overlay {
      opacity: 1;
      transform: translateY(0);
    }

    .gallery-grid-item__title {
      font-family: 'Libre Baskerville', serif;
      font-size: 0.85rem;
      font-weight: 400;
      font-style: italic;
      margin: 0 0 var(--space-1) 0;
      line-height: 1.3;
    }

    .gallery-grid-item__artist {
      font-family: 'Libre Baskerville', serif;
      font-size: 0.75rem;
      opacity: 0.85;
      margin: 0;
    }

    /* Video indicator badge */
    .gallery-grid-item__badge {
      position: absolute;
      top: var(--space-3);
      right: var(--space-3);
      width: 28px;
      height: 28px;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.8;
      pointer-events: none;
    }

    .gallery-grid-item__badge svg {
      width: 14px;
      height: 14px;
      color: #fff;
    }

    /* Thoughts button - appears on hover */
    .gallery-grid-item__thoughts-btn {
      position: absolute;
      top: var(--space-3);
      left: var(--space-3);
      padding: 6px 10px;
      background: rgba(0, 0, 0, 0.65);
      backdrop-filter: blur(4px);
      border: none;
      border-radius: 4px;
      color: rgba(255, 255, 255, 0.9);
      font-family: 'Libre Baskerville', serif;
      font-size: 0.65rem;
      font-style: italic;
      letter-spacing: 0.03em;
      cursor: pointer;
      opacity: 0;
      transform: translateY(-5px);
      transition: opacity 0.25s ease, transform 0.25s ease, background 0.2s ease;
      z-index: 5;
    }

    .gallery-grid-item:hover .gallery-grid-item__thoughts-btn {
      opacity: 1;
      transform: translateY(0);
    }

    .gallery-grid-item__thoughts-btn:hover {
      background: rgba(0, 0, 0, 0.85);
    }

    /* Thoughts overlay - fades over thumbnail */
    .gallery-grid-item__thoughts-overlay {
      position: absolute;
      inset: 0;
      background: rgba(15, 15, 15, 0.92);
      padding: var(--space-5);
      display: flex;
      flex-direction: column;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.35s ease;
      z-index: 10;
      overflow-y: auto;
    }

    .gallery-grid-item__thoughts-overlay.is-visible {
      opacity: 1;
      pointer-events: auto;
    }

    .gallery-grid-item__thoughts-label {
      font-family: 'Libre Baskerville', serif;
      font-size: 0.6rem;
      font-weight: 400;
      color: rgba(255, 255, 255, 0.5);
      text-transform: lowercase;
      letter-spacing: 0.05em;
      margin: 0 0 var(--space-3) 0;
    }

    .gallery-grid-item__thoughts-text {
      font-family: 'Libre Baskerville', serif;
      font-size: 0.8rem;
      font-weight: 400;
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.7;
      margin: 0;
      letter-spacing: 0.01em;
    }

    .gallery-grid-item__thoughts-close {
      position: absolute;
      top: var(--space-3);
      right: var(--space-3);
      width: 28px;
      height: 28px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .gallery-grid-item__thoughts-close:hover {
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
    }

    .gallery-grid-item__thoughts-close svg {
      width: 14px;
      height: 14px;
    }

    /* Hide thoughts button if no description */
    .gallery-grid-item[data-has-thoughts="false"] .gallery-grid-item__thoughts-btn {
      display: none;
    }

    body.grid-mode {
      height: auto;
      overflow: auto;
    }

    body.grid-mode .gallery-page {
      height: auto;
      overflow: visible;
    }

    body.grid-mode .gallery-grid {
      display: block;
    }

    body.grid-mode .gallery-main {
      display: none;
    }

    body.grid-mode #grid-btn {
      background: var(--text-primary);
      color: var(--gallery-wall);
      border-color: var(--text-primary);
    }

    body.grid-mode .side-nav {
      display: none;
    }

    body.grid-mode .view-controls {
      display: none;
    }

    /* Grid View Header */
    .gallery-grid-header {
      text-align: center;
      margin-bottom: var(--space-6);
    }

    .gallery-grid-title {
      font-family: 'Kiya', sans-serif;
      font-size: 2rem;
      font-weight: normal;
      color: var(--text-primary);
      margin: 0 0 var(--space-2) 0;
    }

    .gallery-grid-subtitle {
      font-family: 'Libre Baskerville', serif;
      font-size: 0.9rem;
      font-style: italic;
      color: var(--text-secondary);
      margin: 0 0 var(--space-3) 0;
    }

    .gallery-grid-count {
      font-family: 'Libre Baskerville', serif;
      font-size: 0.75rem;
      color: var(--text-tertiary);
      letter-spacing: 0.08em;
      text-transform: lowercase;
      font-style: italic;
    }

    /* ==========================================================================
       FONT TESTING TOOL
       ========================================================================== */
    .font-tool {
      position: fixed;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      z-index: 200;
      display: none; /* Hidden for now - change to 'flex' to re-enable */
      align-items: center;
    }

    .font-tool__toggle {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(8px);
      border: none;
      border-radius: 0 6px 6px 0;
      padding: 0.5rem 0.35rem;
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.65rem;
      writing-mode: vertical-rl;
      text-orientation: mixed;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .font-tool__toggle:hover {
      background: rgba(0, 0, 0, 0.6);
      color: #fff;
    }

    .font-tool__panel {
      background: rgba(20, 20, 20, 0.95);
      backdrop-filter: blur(12px);
      border-radius: 0 8px 8px 0;
      padding: 1rem;
      width: 220px;
      transform: translateX(-100%);
      opacity: 0;
      pointer-events: none;
      transition: all 0.3s ease;
      max-height: 80vh;
      overflow-y: auto;
    }

    .font-tool.is-open .font-tool__panel {
      transform: translateX(0);
      opacity: 1;
      pointer-events: auto;
    }

    .font-tool.is-open .font-tool__toggle {
      border-radius: 0;
    }

    .font-tool__title {
      font-size: 0.7rem;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.75rem;
    }

    .font-tool__group {
      margin-bottom: 1rem;
    }

    .font-tool__label {
      font-size: 0.65rem;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 0.35rem;
      display: block;
    }

    .font-tool__select {
      width: 100%;
      background: #2a2a2a;
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 4px;
      padding: 0.4rem 0.5rem;
      color: #fff;
      font-size: 0.75rem;
      cursor: pointer;
    }

    .font-tool__select option {
      background: #2a2a2a;
      color: #fff;
    }

    .font-tool__select:focus {
      outline: none;
      border-color: rgba(255, 255, 255, 0.4);
    }

    .font-tool__reset {
      width: 100%;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      padding: 0.4rem;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.7rem;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .font-tool__reset:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .gallery-main {
        height: 100vh;
        padding: 0;
      }

      .artwork-plaque {
        max-width: calc(100% - var(--space-8));
        bottom: var(--space-4);
        left: var(--space-4);
      }

      /* Sidebar hidden on mobile */
      .artwork-sidebar {
        display: none;
      }

      /* Side nav smaller on mobile */
      .side-nav--prev {
        left: var(--space-2);
      }

      .side-nav--next {
        right: var(--space-2);
      }

      .side-nav-btn {
        width: 40px;
        height: 40px;
      }

      .side-nav-btn svg {
        width: 20px;
        height: 20px;
      }

      .gallery-counter {
        bottom: var(--space-4);
      }

      .view-controls {
        bottom: var(--space-4);
        right: var(--space-4);
      }

      /* Grid responsive */
      .gallery-grid {
        padding: calc(70px + var(--space-4)) var(--space-4) var(--space-6);
      }

      .gallery-grid-item {
        margin-bottom: var(--space-4);
      }

      .gallery-grid-item__overlay {
        opacity: 1;
        transform: none;
        padding: var(--space-3);
      }

      .gallery-grid-title {
        font-size: 1.5rem;
      }
    }

    /* ==========================================
       Y2K MUSIC PLAYER
       Retro portable media player aesthetic
       ========================================== */
    .y2k-player {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%) translateY(calc(100% - 44px));
      z-index: 200;
      transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      font-family: 'Trebuchet MS', 'Lucida Sans', Arial, sans-serif;
    }

    .y2k-player.is-open {
      transform: translateX(-50%) translateY(0);
    }

    .y2k-player__shell {
      background: linear-gradient(180deg, #ffffff 0%, #e8e8e8 50%, #d0d0d0 100%);
      border-radius: 16px 16px 0 0;
      padding: 4px;
      box-shadow:
        0 -4px 20px rgba(0, 0, 0, 0.15),
        inset 0 2px 0 rgba(255, 255, 255, 0.9),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
    }

    .y2k-player__body {
      background: linear-gradient(180deg, #f5f5f5 0%, #ebebeb 100%);
      border-radius: 14px 14px 0 0;
      overflow: hidden;
      border: 1px solid #c0c0c0;
      border-bottom: none;
      width: 280px;
    }

    .y2k-player__toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 10px 20px;
      cursor: pointer;
      background: linear-gradient(180deg, #f8f8f8 0%, #e0e0e0 50%, #d5d5d5 100%);
      border: none;
      border-bottom: 1px solid #b0b0b0;
      width: 100%;
      transition: all 0.15s;
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.8),
        inset 0 -1px 2px rgba(0, 0, 0, 0.05);
    }

    .y2k-player__toggle:hover {
      background: linear-gradient(180deg, #ffffff 0%, #e8e8e8 50%, #ddd 100%);
    }

    .y2k-player__toggle:active {
      background: linear-gradient(180deg, #d5d5d5 0%, #e0e0e0 50%, #f0f0f0 100%);
      box-shadow:
        inset 0 2px 4px rgba(0, 0, 0, 0.1),
        inset 0 -1px 0 rgba(255, 255, 255, 0.5);
    }

    .y2k-player__lcd {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      background: linear-gradient(180deg, #c8d4c8 0%, #a8b8a8 100%);
      border-radius: 3px;
      box-shadow:
        inset 0 1px 3px rgba(0, 0, 0, 0.3),
        0 1px 0 rgba(255, 255, 255, 0.5);
      font-family: 'Consolas', 'Monaco', monospace;
    }

    .y2k-player__lcd-text {
      font-size: 0.65rem;
      color: #2a3a2a;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .y2k-player__lcd-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #4a6a4a;
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3);
      animation: lcd-blink 1.5s ease-in-out infinite;
    }

    @keyframes lcd-blink {
      0%, 100% { background: #4a6a4a; }
      50% { background: #7ac47a; box-shadow: 0 0 4px #7ac47a, inset 0 1px 2px rgba(0, 0, 0, 0.2); }
    }

    .y2k-player__grip {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .y2k-player__grip-line {
      width: 20px;
      height: 2px;
      background: linear-gradient(90deg, #c0c0c0 0%, #a0a0a0 50%, #c0c0c0 100%);
      border-radius: 1px;
      box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
    }

    .y2k-player__arrow {
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-bottom: 6px solid #888;
      transition: transform 0.3s;
      filter: drop-shadow(0 1px 0 rgba(255, 255, 255, 0.5));
    }

    .y2k-player.is-open .y2k-player__arrow {
      transform: rotate(180deg);
    }

    .y2k-player__content {
      background: linear-gradient(180deg, #e8e8e8 0%, #f0f0f0 100%);
      padding: 6px;
    }

    .y2k-player__display {
      background: linear-gradient(180deg, #1a2a1a 0%, #0f1a0f 100%);
      border-radius: 4px;
      padding: 3px;
      margin-bottom: 8px;
      box-shadow:
        inset 0 2px 6px rgba(0, 0, 0, 0.6),
        0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .y2k-player__display-inner {
      background: linear-gradient(180deg, #3a5a3a 0%, #2a4a2a 100%);
      border-radius: 2px;
      padding: 8px 12px;
      min-height: 32px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    }

    .y2k-player__track-marquee {
      overflow: hidden;
      position: relative;
      width: 100%;
    }

    .y2k-player__track-title {
      display: inline-block;
      font-size: 0.75rem;
      color: #1a2a1a;
      text-shadow: 0 1px 0 rgba(100, 160, 100, 0.5);
      white-space: nowrap;
      letter-spacing: 0.02em;
      padding-right: 50px;
    }

    .y2k-player__track-title.scrolling {
      animation: marquee-scroll 12s linear infinite;
    }

    @keyframes marquee-scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    .y2k-player__progress-row {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 0 4px;
      margin-bottom: 6px;
    }

    .y2k-player__time {
      font-size: 0.55rem;
      font-family: 'Consolas', 'Monaco', monospace;
      color: #666;
      min-width: 28px;
    }

    .y2k-player__time:last-child {
      text-align: right;
    }

    .y2k-player__progress {
      flex: 1;
      height: 10px;
      background: linear-gradient(180deg, #b0b0b0 0%, #d0d0d0 50%, #c0c0c0 100%);
      border-radius: 5px;
      box-shadow:
        inset 0 2px 4px rgba(0, 0, 0, 0.2),
        0 1px 0 rgba(255, 255, 255, 0.5);
      position: relative;
      cursor: pointer;
      overflow: hidden;
    }

    .y2k-player__progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(180deg, #7ac47a 0%, #5aa45a 50%, #4a944a 100%);
      border-radius: 5px;
      transition: width 0.1s linear;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    .y2k-player__progress-handle {
      position: absolute;
      top: 50%;
      left: 0%;
      transform: translate(-50%, -50%);
      width: 14px;
      height: 14px;
      background: linear-gradient(180deg, #f5f5f5 0%, #d0d0d0 50%, #b8b8b8 100%);
      border-radius: 50%;
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      cursor: grab;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .y2k-player__progress:hover .y2k-player__progress-handle {
      opacity: 1;
    }

    .y2k-player__controls-row {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 0 4px 6px;
    }

    .y2k-player__controls {
      display: flex;
      gap: 3px;
    }

    .y2k-player__volume {
      flex: 1;
      height: 8px;
      max-width: 60px;
      background: linear-gradient(180deg, #b0b0b0 0%, #d0d0d0 50%, #c0c0c0 100%);
      border-radius: 4px;
      box-shadow:
        inset 0 1px 3px rgba(0, 0, 0, 0.2),
        0 1px 0 rgba(255, 255, 255, 0.5);
      cursor: pointer;
      overflow: hidden;
    }

    .y2k-player__volume-bar {
      height: 100%;
      width: 70%;
      background: linear-gradient(180deg, #7a7a7a 0%, #5a5a5a 50%, #4a4a4a 100%);
      border-radius: 4px;
      transition: width 0.1s;
    }

    .y2k-player__btn {
      width: 26px;
      height: 22px;
      border-radius: 3px;
      background: linear-gradient(180deg, #f5f5f5 0%, #d8d8d8 50%, #c8c8c8 100%);
      border: 1px solid #a0a0a0;
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.8),
        0 1px 2px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.1s;
    }

    .y2k-player__btn-icon {
      font-size: 0.6rem;
      color: #555;
    }

    .y2k-player__btn:hover {
      background: linear-gradient(180deg, #ffffff 0%, #e8e8e8 50%, #d8d8d8 100%);
    }

    .y2k-player__btn:active {
      background: linear-gradient(180deg, #c8c8c8 0%, #d8d8d8 50%, #e8e8e8 100%);
      box-shadow:
        inset 0 2px 4px rgba(0, 0, 0, 0.15),
        0 1px 0 rgba(255, 255, 255, 0.5);
    }

    .y2k-player__btn--play {
      width: 32px;
      background: linear-gradient(180deg, #90e090 0%, #60c060 50%, #50b050 100%);
      border-color: #40a040;
    }

    .y2k-player__btn--play:hover {
      background: linear-gradient(180deg, #a0f0a0 0%, #70d070 50%, #60c060 100%);
    }

    .y2k-player__btn--play:active {
      background: linear-gradient(180deg, #50b050 0%, #60c060 50%, #80e080 100%);
    }

    .y2k-player__btn--play .y2k-player__btn-icon {
      color: #1a4a1a;
    }

    .y2k-player__btn--queue {
      margin-left: auto;
    }

    .y2k-player__btn--queue.is-active {
      background: linear-gradient(180deg, #c8c8c8 0%, #d8d8d8 50%, #e8e8e8 100%);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15);
    }

    .y2k-player__lcd-dot.playing {
      background: #7ac47a;
      box-shadow: 0 0 6px #7ac47a, inset 0 1px 2px rgba(0, 0, 0, 0.2);
      animation: none;
    }

    .y2k-player__lcd-dot.paused {
      background: #c4c47a;
      box-shadow: 0 0 6px #c4c47a, inset 0 1px 2px rgba(0, 0, 0, 0.2);
      animation: lcd-blink 0.8s ease-in-out infinite;
    }

    .y2k-player__lcd-dot.stopped {
      background: #4a6a4a;
      box-shadow: none;
      animation: none;
    }

    .y2k-player__queue {
      display: none;
      background: linear-gradient(180deg, #1a2a1a 0%, #0f1a0f 100%);
      border-radius: 4px;
      margin-top: 6px;
      box-shadow:
        inset 0 2px 6px rgba(0, 0, 0, 0.6),
        0 1px 0 rgba(255, 255, 255, 0.3);
      overflow: hidden;
    }

    .y2k-player__queue.is-open {
      display: block;
    }

    .y2k-player__queue-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 10px;
      background: linear-gradient(180deg, #2a4a2a 0%, #1a3a1a 100%);
      border-bottom: 1px solid #0a1a0a;
    }

    .y2k-player__queue-title {
      font-size: 0.6rem;
      font-weight: 600;
      color: #7ac47a;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .y2k-player__queue-count {
      font-size: 0.55rem;
      color: #5a8a5a;
      font-family: 'Consolas', 'Monaco', monospace;
    }

    .y2k-player__queue-list {
      max-height: 180px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #3a5a3a #1a2a1a;
    }

    .y2k-player__queue-list::-webkit-scrollbar {
      width: 8px;
    }

    .y2k-player__queue-list::-webkit-scrollbar-track {
      background: #1a2a1a;
    }

    .y2k-player__queue-list::-webkit-scrollbar-thumb {
      background: #3a5a3a;
      border-radius: 4px;
    }

    .y2k-player__queue-item {
      display: flex;
      align-items: center;
      padding: 8px 10px;
      cursor: pointer;
      border-bottom: 1px solid rgba(0, 0, 0, 0.3);
      transition: background 0.15s;
      gap: 8px;
    }

    .y2k-player__queue-item:hover {
      background: rgba(60, 100, 60, 0.3);
    }

    .y2k-player__queue-item.is-playing {
      background: linear-gradient(90deg, rgba(80, 140, 80, 0.4) 0%, rgba(60, 100, 60, 0.2) 100%);
    }

    .y2k-player__queue-item.is-playing .y2k-player__queue-num {
      color: #7ac47a;
    }

    .y2k-player__queue-num {
      font-size: 0.55rem;
      font-family: 'Consolas', 'Monaco', monospace;
      color: #4a6a4a;
      min-width: 20px;
    }

    .y2k-player__queue-name {
      font-size: 0.65rem;
      color: #8aba8a;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .y2k-player__queue-playing-icon {
      font-size: 0.5rem;
      color: #7ac47a;
      animation: pulse-glow 1s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .y2k-player__queue-loading {
      padding: 20px;
      text-align: center;
      font-size: 0.6rem;
      color: #5a8a5a;
      font-style: italic;
    }

    @media (max-width: 768px) {
      .y2k-player__toggle {
        padding: 8px 16px;
      }
      .y2k-player__display-inner {
        padding: 6px 10px;
        min-height: 28px;
      }
      .y2k-player__track-title {
        font-size: 0.7rem;
      }
      .y2k-player__body {
        width: 260px;
      }
    }
  </style>
</head>
<body>
  <!-- Password Protection -->
  <script src="../assets/js/auth.js"></script>

  <!-- Font Testing Tool -->
  <div class="font-tool" id="font-tool">
    <button class="font-tool__toggle" id="font-tool-toggle">Fonts</button>
    <div class="font-tool__panel">
      <div class="font-tool__title">Font Testing</div>

      <div class="font-tool__group">
        <label class="font-tool__label">Title Font</label>
        <select class="font-tool__select" id="font-title">
          <option value="">Default</option>
          <optgroup label="Sans Serif">
            <option value="'Inter', sans-serif">Inter</option>
            <option value="'Helvetica Neue', Helvetica, sans-serif">Helvetica Neue</option>
            <option value="'SF Pro Display', sans-serif">SF Pro Display</option>
            <option value="'Roboto', sans-serif">Roboto</option>
            <option value="'Open Sans', sans-serif">Open Sans</option>
            <option value="'Montserrat', sans-serif">Montserrat</option>
            <option value="'Poppins', sans-serif">Poppins</option>
            <option value="'DM Sans', sans-serif">DM Sans</option>
            <option value="'Space Grotesk', sans-serif">Space Grotesk</option>
          </optgroup>
          <optgroup label="Serif">
            <option value="'Georgia', serif">Georgia</option>
            <option value="'Playfair Display', serif">Playfair Display</option>
            <option value="'Cormorant Garamond', serif">Cormorant Garamond</option>
            <option value="'Libre Baskerville', serif">Libre Baskerville</option>
            <option value="'Source Serif 4', serif">Source Serif Pro</option>
            <option value="'EB Garamond', serif">EB Garamond</option>
            <option value="'Crimson Text', serif">Crimson Text</option>
          </optgroup>
          <optgroup label="Display">
            <option value="'Bebas Neue', sans-serif">Bebas Neue</option>
            <option value="'Oswald', sans-serif">Oswald</option>
            <option value="'Anton', sans-serif">Anton</option>
          </optgroup>
        </select>
      </div>

      <div class="font-tool__group">
        <label class="font-tool__label">Artist/Info Font</label>
        <select class="font-tool__select" id="font-artist">
          <option value="">Default</option>
          <optgroup label="Sans Serif">
            <option value="'Inter', sans-serif">Inter</option>
            <option value="'Helvetica Neue', Helvetica, sans-serif">Helvetica Neue</option>
            <option value="'Roboto', sans-serif">Roboto</option>
            <option value="'Open Sans', sans-serif">Open Sans</option>
            <option value="'Lato', sans-serif">Lato</option>
            <option value="'Work Sans', sans-serif">Work Sans</option>
            <option value="'IBM Plex Sans', sans-serif">IBM Plex Sans</option>
          </optgroup>
          <optgroup label="Serif">
            <option value="'Georgia', serif">Georgia</option>
            <option value="'Merriweather', serif">Merriweather</option>
            <option value="'Lora', serif">Lora</option>
            <option value="'Source Serif 4', serif">Source Serif Pro</option>
          </optgroup>
        </select>
      </div>

      <div class="font-tool__group">
        <label class="font-tool__label">Description Font</label>
        <select class="font-tool__select" id="font-description">
          <option value="">Default</option>
          <optgroup label="Sans Serif">
            <option value="'Inter', sans-serif">Inter</option>
            <option value="'Helvetica Neue', Helvetica, sans-serif">Helvetica Neue</option>
            <option value="'Roboto', sans-serif">Roboto</option>
            <option value="'Open Sans', sans-serif">Open Sans</option>
            <option value="'Lato', sans-serif">Lato</option>
            <option value="'IBM Plex Sans', sans-serif">IBM Plex Sans</option>
            <option value="'DM Sans', sans-serif">DM Sans</option>
          </optgroup>
          <optgroup label="Serif">
            <option value="'Georgia', serif">Georgia</option>
            <option value="'Merriweather', serif">Merriweather</option>
            <option value="'Lora', serif">Lora</option>
            <option value="'Source Serif 4', serif">Source Serif Pro</option>
            <option value="'Crimson Text', serif">Crimson Text</option>
            <option value="'Libre Baskerville', serif">Libre Baskerville</option>
          </optgroup>
        </select>
      </div>

      <button class="font-tool__reset" id="font-reset">Reset All</button>
    </div>
  </div>

  <div class="gallery-page">

    <!-- Side Navigation -->
    <nav class="side-nav side-nav--prev">
      <button class="side-nav-btn" id="side-prev-btn" disabled title="Previous">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
    </nav>

    <nav class="side-nav side-nav--next">
      <button class="side-nav-btn" id="side-next-btn" disabled title="Next">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M9 5l7 7-7 7"/>
        </svg>
      </button>
    </nav>

    <!-- Counter -->
    <div class="gallery-counter" id="gallery-counter">1 / 1</div>

    <!-- Header (matching homepage) -->
    <header class="gallery-header" id="gallery-header">
      <nav class="gallery-nav-left">
        <a href="../writings/index.html" class="gallery-nav-link">writings</a>
        <a href="../inspirations/index.html" class="gallery-nav-link">inspirations</a>
      </nav>

      <a href="../index.html" class="gallery-logo">
        <span class="gallery-logo-name">con.rad</span>
        <span class="gallery-logo-tagline">building curiosity...</span>
      </a>

      <nav class="gallery-nav-right">
        <a href="../projects/index.html" class="gallery-nav-link">projects</a>
        <a href="../collection/index.html" class="gallery-nav-link">collection</a>
      </nav>
    </header>

    <!-- Main Gallery Content -->
    <main class="gallery-main" id="gallery-main">

      <!-- Artwork Display -->
      <div class="artwork-container" id="artwork-container">

        <!-- Frame -->
        <div class="artwork-frame" id="artwork-frame">
          <div class="artwork-inner" id="artwork-inner">
            <div class="artwork-loading" id="artwork-loading"></div>
          </div>
        </div>

        <!-- Museum Plaque -->
        <div class="artwork-plaque" id="artwork-plaque">
          <h1 class="plaque-title" id="plaque-title">Untitled</h1>
          <p class="plaque-artist" id="plaque-artist"></p>
          <div class="plaque-details" id="plaque-details">
            <span class="plaque-detail">
              <span class="plaque-detail-label">Medium:</span>
              <span id="plaque-medium">Generative Art</span>
            </span>
          </div>
        </div>

        <!-- Sidebar Description -->
        <aside class="artwork-sidebar" id="artwork-sidebar" data-empty="true">
          <p class="sidebar-label">thoughts.</p>
          <div class="sidebar-text" id="sidebar-text"></div>
        </aside>

        <!-- Description/Writing Section -->
        <section class="artwork-description" id="artwork-description" style="display: none;">
          <div class="description-content" id="description-content">
          </div>
        </section>


      </div>

      <!-- Empty State -->
      <div class="gallery-empty" id="gallery-empty" style="display: none;">
        <svg class="gallery-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
          <rect x="3" y="3" width="18" height="18" rx="2"/>
          <circle cx="8.5" cy="8.5" r="1.5"/>
          <path d="M21 15l-5-5L5 21"/>
        </svg>
        <p class="gallery-empty-text">No artwork to display</p>
      </div>

    </main>

    <!-- Grid View -->
    <section class="gallery-grid" id="gallery-grid">
      <header class="gallery-grid-header">
        <h1 class="gallery-grid-title">Collection</h1>
        <p class="gallery-grid-subtitle">collection of thoughts around my collection.</p>
        <p class="gallery-grid-count" id="grid-count">0 pieces</p>
      </header>
      <div class="gallery-grid-inner" id="gallery-grid-inner">
        <!-- Grid items populated by JS -->
      </div>
    </section>

    <!-- View Controls -->
    <div class="view-controls">
      <button class="view-btn" id="grid-btn" title="Toggle grid view">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="3" y="3" width="7" height="7"/>
          <rect x="14" y="3" width="7" height="7"/>
          <rect x="3" y="14" width="7" height="7"/>
          <rect x="14" y="14" width="7" height="7"/>
        </svg>
      </button>
      <button class="view-btn" id="fullscreen-btn" title="Toggle fullscreen">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"/>
        </svg>
      </button>
      <a class="view-btn" id="external-btn" href="#" target="_blank" rel="noopener" title="Open in new tab">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/>
          <polyline points="15 3 21 3 21 9"/>
          <line x1="10" y1="14" x2="21" y2="3"/>
        </svg>
      </a>
    </div>

  </div>

  <script>
    // ==========================================================================
    // GALLERY CONTROLLER
    // ==========================================================================

    (function() {
      // Collection data - populated from main site config or URL params
      let collection = [];
      let currentIndex = 0;
      let isGridMode = false;

      // DOM Elements
      const artworkContainer = document.getElementById('artwork-container');
      const artworkFrame = document.getElementById('artwork-frame');
      const artworkInner = document.getElementById('artwork-inner');
      const artworkLoading = document.getElementById('artwork-loading');
      const plaqueTitle = document.getElementById('plaque-title');
      const plaqueArtist = document.getElementById('plaque-artist');
      const plaqueMedium = document.getElementById('plaque-medium');
      const plaqueDetails = document.getElementById('plaque-details');
      const artworkDescription = document.getElementById('artwork-description');
      const descriptionContent = document.getElementById('description-content');
      const fullscreenBtn = document.getElementById('fullscreen-btn');
      const externalBtn = document.getElementById('external-btn');
      const galleryEmpty = document.getElementById('gallery-empty');
      const galleryHeader = document.getElementById('gallery-header');
      const gridBtn = document.getElementById('grid-btn');
      const gridInner = document.getElementById('gallery-grid-inner');
      const gridCount = document.getElementById('grid-count');
      const artworkSidebar = document.getElementById('artwork-sidebar');
      const sidebarText = document.getElementById('sidebar-text');
      const sidePrevBtn = document.getElementById('side-prev-btn');
      const sideNextBtn = document.getElementById('side-next-btn');
      const galleryCounter = document.getElementById('gallery-counter');

      // Initialize
      function init() {
        // Priority 1: Use SITE_CONFIG from config-loader (includes fallback config)
        if (window.SITE_CONFIG && window.SITE_CONFIG.collection && window.SITE_CONFIG.collection.length > 0) {
          collection = window.SITE_CONFIG.collection;
          console.log('[Gallery] Using SITE_CONFIG collection:', collection.length, 'items');
        }
        // Priority 2: Try parent window's config (if opened from homepage)
        else if (window.opener && window.opener.SITE_CONFIG && window.opener.SITE_CONFIG.collection) {
          collection = window.opener.SITE_CONFIG.collection;
        } else if (window.parent && window.parent.SITE_CONFIG && window.parent.SITE_CONFIG.collection) {
          collection = window.parent.SITE_CONFIG.collection;
        }
        // Priority 3: Fallback to localStorage
        else {
          const stored = localStorage.getItem('conradCollection');
          if (stored) {
            try {
              collection = JSON.parse(stored);
              console.log('[Gallery] Using localStorage collection');
            } catch (e) {
              console.warn('Failed to parse stored collection');
            }
          }
        }

        // Check URL params for specific piece or collection data
        const params = new URLSearchParams(window.location.search);

        // Direct piece URL
        if (params.has('url')) {
          collection = [{
            thumbnail: params.get('url'),
            render: params.get('url'),
            title: params.get('title') || 'Untitled',
            artist: params.get('artist') || '',
            medium: params.get('medium') || 'Digital Art',
            description: params.get('description') || ''
          }];
        }

        // Index param - if present, show detail view; otherwise show grid
        const hasIndex = params.has('index');
        if (hasIndex) {
          currentIndex = parseInt(params.get('index'), 10) || 0;
        }

        // View param
        if (params.get('view') === 'grid') {
          isGridMode = true;
        } else if (!hasIndex && collection.length > 1) {
          // Default to grid view when no specific piece is requested
          isGridMode = true;
        }

        // If still no collection, show empty state
        if (collection.length === 0) {
          showEmptyState();
          return;
        }

        // Clamp index
        currentIndex = Math.max(0, Math.min(currentIndex, collection.length - 1));

        // Build grid view
        buildGrid();

        // Display artwork or grid
        if (isGridMode) {
          document.body.classList.add('grid-mode');
        } else {
          displayArtwork(currentIndex);
        }
        updateNavigation();

        // Event listeners
        sidePrevBtn.addEventListener('click', () => navigate(-1));
        sideNextBtn.addEventListener('click', () => navigate(1));
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        gridBtn.addEventListener('click', toggleGridMode);

        // Keyboard navigation
        document.addEventListener('keydown', handleKeyboard);

        // Scroll header effect
        window.addEventListener('scroll', handleScroll);

        // Resize handler for sidebar positioning
        window.addEventListener('resize', handleResize);
      }

      function showEmptyState() {
        artworkContainer.style.display = 'none';
        galleryEmpty.style.display = 'flex';
      }

      function displayArtwork(index) {
        const item = collection[index];
        if (!item) return;

        // Show loading
        artworkLoading.style.display = 'flex';

        // Use render URL for the collection page display (fallback to thumbnail for backwards compatibility)
        const url = item.render || item.thumbnail || item.link || item.image;

        // Determine content type - prioritize explicit type field from config
        let isVideoUrl = false;
        let isInteractive = false;

        if (item.type) {
          // Use explicit type from config.json
          isVideoUrl = item.type === 'video';
          isInteractive = item.type === 'iframe';
        } else {
          // Fallback to extension-based detection for backwards compatibility
          const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.svg', '.bmp'];
          const isImageUrl = imageExtensions.some(ext => url.toLowerCase().includes(ext));

          const videoExtensions = ['.mp4', '.webm', '.mov', '.ogg', '.avi', '.m4v'];
          isVideoUrl = videoExtensions.some(ext => url.toLowerCase().includes(ext)) || item.video === true;

          // Only use iframe if explicitly marked as interactive OR ends with .html
          // (and is NOT an image or video file)
          isInteractive = !isImageUrl && !isVideoUrl && (
                               item.interactive === true ||
                               url.endsWith('.html') ||
                               url.includes('/index.html')
                               );
        }

        // Clear previous content and reset frame classes
        const existingMedia = artworkInner.querySelector('iframe, img, video');
        if (existingMedia) {
          existingMedia.remove();
        }
        artworkFrame.classList.remove('artwork-frame--iframe');
        artworkFrame.classList.remove('artwork-frame--video');
        artworkInner.style.removeProperty('--artwork-aspect-ratio');

        if (isVideoUrl) {
          // Create video element for video pieces
          artworkFrame.classList.add('artwork-frame--video');

          const video = document.createElement('video');
          video.src = url;
          video.title = item.title || 'Artwork';
          video.controls = true;
          video.loop = true;
          video.muted = item.muted !== false; // Default to muted, can set muted: false in item
          video.playsInline = true;
          video.preload = 'metadata';

          video.onloadeddata = () => {
            artworkLoading.style.display = 'none';
            // Position sidebar after video loads
            setTimeout(positionSidebar, 50);
            // Auto-play if desired
            if (item.autoplay !== false) {
              video.play().catch(() => {}); // Catch autoplay failures silently
            }
          };
          video.onerror = () => {
            artworkLoading.textContent = 'Failed to load video';
          };
          artworkInner.appendChild(video);
        } else if (isInteractive) {
          // Create iframe for interactive/generative pieces
          artworkFrame.classList.add('artwork-frame--iframe');

          // Set aspect ratio from item data or default to 1:1
          const aspectRatio = item.aspectRatio || '1 / 1';
          artworkInner.style.setProperty('--artwork-aspect-ratio', aspectRatio);

          const iframe = document.createElement('iframe');
          iframe.src = url;
          iframe.title = item.title || 'Artwork';
          iframe.loading = 'lazy';
          iframe.allow = 'autoplay';
          iframe.scrolling = 'no';
          iframe.style.overflow = 'hidden';
          iframe.onload = () => {
            artworkLoading.style.display = 'none';
            // Position sidebar after iframe loads
            setTimeout(positionSidebar, 50);
          };
          artworkInner.appendChild(iframe);
        } else {
          // Create image for static pieces
          const img = document.createElement('img');
          img.src = url;
          img.alt = item.title || 'Artwork';
          img.onload = () => {
            artworkLoading.style.display = 'none';
            // Position sidebar after image loads and dimensions are known
            setTimeout(positionSidebar, 50);
          };
          img.onerror = () => {
            artworkLoading.textContent = 'Failed to load';
          };
          artworkInner.appendChild(img);
        }

        // Update plaque
        plaqueTitle.textContent = item.title || 'Untitled';
        plaqueArtist.textContent = item.artist || '';
        plaqueArtist.style.display = item.artist ? 'block' : 'none';

        // Update medium if provided
        if (item.medium) {
          plaqueMedium.textContent = item.medium;
        } else {
          plaqueMedium.textContent = isInteractive ? 'Generative Art' : 'Digital Art';
        }

        // Update external link
        externalBtn.href = url;

        // Update sidebar description if provided
        if (item.description) {
          sidebarText.innerHTML = '<p>' + item.description.replace(/\n\n/g, '</p><p>') + '</p>';
          artworkSidebar.setAttribute('data-empty', 'false');
        } else {
          sidebarText.innerHTML = '';
          artworkSidebar.setAttribute('data-empty', 'true');
        }

        // Hide the old description section (now using sidebar)
        artworkDescription.style.display = 'none';

        // Update page title
        document.title = (item.title || 'Artwork') + ' | Collection | con.rad';
      }

      function updateNavigation() {
        sidePrevBtn.disabled = currentIndex === 0;
        sideNextBtn.disabled = currentIndex === collection.length - 1;
        galleryCounter.textContent = (currentIndex + 1) + ' / ' + collection.length;

        // Hide nav if only one item or in grid mode
        const isGridMode = document.body.classList.contains('grid-mode');
        const showNav = collection.length > 1 && !isGridMode;
        document.querySelector('.side-nav--prev').style.display = showNav ? 'block' : 'none';
        document.querySelector('.side-nav--next').style.display = showNav ? 'block' : 'none';
        galleryCounter.style.display = showNav ? 'block' : 'none';
      }

      // Dynamically position sidebar based on artwork position
      function positionSidebar() {
        if (!artworkSidebar || artworkSidebar.dataset.empty === 'true') return;

        const frame = artworkFrame.querySelector('img') || artworkFrame.querySelector('iframe') || artworkFrame.querySelector('video');
        if (!frame) return;

        const frameRect = frame.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const navButtonWidth = 60; // Space for the side nav button

        // Calculate available space between artwork right edge and viewport right edge
        const artworkRightEdge = frameRect.right;
        const availableSpace = viewportWidth - artworkRightEdge - navButtonWidth;

        // Minimum space needed to show sidebar
        const minSpace = 150;

        if (availableSpace < minSpace) {
          // Not enough space, hide sidebar
          artworkSidebar.style.display = 'none';
          return;
        }

        artworkSidebar.style.display = 'block';

        // Calculate sidebar width (use most of available space, with constraints)
        const padding = 40; // Padding on each side within the available space
        const maxSidebarWidth = 280;
        const minSidebarWidth = 120;
        const sidebarWidth = Math.min(maxSidebarWidth, Math.max(minSidebarWidth, availableSpace - padding * 2));

        // Center the sidebar in the available space
        const centerPoint = artworkRightEdge + (availableSpace / 2);
        const sidebarLeft = centerPoint - (sidebarWidth / 2);
        const rightPosition = viewportWidth - sidebarLeft - sidebarWidth;

        // Apply styles
        artworkSidebar.style.right = rightPosition + 'px';
        artworkSidebar.style.maxWidth = sidebarWidth + 'px';
      }

      // Debounced resize handler
      let resizeTimeout;
      function handleResize() {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(positionSidebar, 100);
      }

      function navigate(direction) {
        const newIndex = currentIndex + direction;
        if (newIndex >= 0 && newIndex < collection.length) {
          currentIndex = newIndex;
          displayArtwork(currentIndex);
          updateNavigation();

          // Update URL without reload
          const url = new URL(window.location);
          url.searchParams.set('index', currentIndex);
          history.replaceState(null, '', url);
        }
      }

      function toggleFullscreen() {
        document.body.classList.toggle('fullscreen-mode');
      }

      function buildGrid() {
        // Update count
        gridCount.textContent = collection.length + ' piece' + (collection.length !== 1 ? 's' : '');

        // Icons
        const videoIcon = `<svg viewBox="0 0 24 24" fill="currentColor"><polygon points="5,3 19,12 5,21"/></svg>`;
        const closeIcon = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>`;

        // Build grid items using thumbnail for grid view (masonry layout)
        gridInner.innerHTML = collection.map((item, index) => {
          const isVideo = item.type === 'video';
          const hasThoughts = item.description && item.description.trim().length > 0;
          const badge = isVideo ? `<div class="gallery-grid-item__badge">${videoIcon}</div>` : '';

          // Thoughts button and overlay (only if description exists)
          const thoughtsBtn = hasThoughts ? `<button class="gallery-grid-item__thoughts-btn" data-thoughts-trigger>thoughts</button>` : '';
          const thoughtsOverlay = hasThoughts ? `
            <div class="gallery-grid-item__thoughts-overlay">
              <button class="gallery-grid-item__thoughts-close" data-thoughts-close>${closeIcon}</button>
              <p class="gallery-grid-item__thoughts-label">thoughts.</p>
              <p class="gallery-grid-item__thoughts-text">${item.description}</p>
            </div>
          ` : '';

          return `
            <div class="gallery-grid-item" data-index="${index}" data-has-thoughts="${hasThoughts}">
              <img src="${item.thumbnail || item.image}" alt="${item.title || 'Artwork'}" loading="lazy">
              ${badge}
              ${thoughtsBtn}
              ${thoughtsOverlay}
              <div class="gallery-grid-item__overlay">
                <h3 class="gallery-grid-item__title">${item.title || 'Untitled'}</h3>
                ${item.artist ? `<p class="gallery-grid-item__artist">${item.artist}</p>` : ''}
              </div>
            </div>
          `;
        }).join('');

        // Add click handlers for viewing pieces
        gridInner.querySelectorAll('.gallery-grid-item').forEach(item => {
          item.addEventListener('click', (e) => {
            // Don't navigate if clicking thoughts button or overlay
            if (e.target.closest('[data-thoughts-trigger]') ||
                e.target.closest('.gallery-grid-item__thoughts-overlay')) {
              return;
            }
            const index = parseInt(item.dataset.index, 10);
            viewPiece(index);
          });
        });

        // Add thoughts button handlers
        gridInner.querySelectorAll('[data-thoughts-trigger]').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const item = btn.closest('.gallery-grid-item');
            const overlay = item.querySelector('.gallery-grid-item__thoughts-overlay');
            if (overlay) {
              overlay.classList.add('is-visible');
            }
          });
        });

        // Add thoughts close button handlers
        gridInner.querySelectorAll('[data-thoughts-close]').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const overlay = btn.closest('.gallery-grid-item__thoughts-overlay');
            if (overlay) {
              overlay.classList.remove('is-visible');
            }
          });
        });

        // Close thoughts overlay when clicking outside text area
        gridInner.querySelectorAll('.gallery-grid-item__thoughts-overlay').forEach(overlay => {
          overlay.addEventListener('click', (e) => {
            // Close if clicking the overlay background (not the text content)
            if (e.target === overlay) {
              overlay.classList.remove('is-visible');
            }
          });
        });
      }

      function toggleGridMode() {
        isGridMode = !isGridMode;
        document.body.classList.toggle('grid-mode', isGridMode);

        if (!isGridMode && collection.length > 0) {
          // Switching to detail view - display current piece
          displayArtwork(currentIndex);
        }

        // Update side navigation visibility
        updateNavigation();

        // Update URL
        const url = new URL(window.location);
        if (isGridMode) {
          url.searchParams.delete('index');
          url.searchParams.set('view', 'grid');
        } else {
          url.searchParams.set('index', currentIndex);
          url.searchParams.delete('view');
        }
        history.replaceState(null, '', url);
      }

      function viewPiece(index) {
        currentIndex = index;
        isGridMode = false;
        document.body.classList.remove('grid-mode');
        displayArtwork(currentIndex);
        updateNavigation();

        // Update URL
        const url = new URL(window.location);
        url.searchParams.set('index', currentIndex);
        url.searchParams.delete('view');
        history.replaceState(null, '', url);

        // Scroll to top
        window.scrollTo(0, 0);
      }

      function handleKeyboard(e) {
        // Don't navigate with arrows in grid mode
        if (!isGridMode) {
          if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
            navigate(-1);
          } else if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
            navigate(1);
          }
        }

        if (e.key === 'Escape') {
          if (document.body.classList.contains('fullscreen-mode')) {
            document.body.classList.remove('fullscreen-mode');
          } else if (!isGridMode) {
            // Escape in detail view goes to grid
            toggleGridMode();
          }
        } else if (e.key === 'f' || e.key === 'F') {
          if (!isGridMode) toggleFullscreen();
        } else if (e.key === 'g' || e.key === 'G') {
          toggleGridMode();
        }
      }

      function handleScroll() {
        if (window.scrollY > 50) {
          galleryHeader.classList.add('scrolled');
        } else {
          galleryHeader.classList.remove('scrolled');
        }
      }

      // Start
      init();
    })();

    // ==========================================================================
    // FONT TESTING TOOL
    // ==========================================================================
    (function() {
      const fontTool = document.getElementById('font-tool');
      const fontToggle = document.getElementById('font-tool-toggle');
      const fontTitle = document.getElementById('font-title');
      const fontArtist = document.getElementById('font-artist');
      const fontDescription = document.getElementById('font-description');
      const fontReset = document.getElementById('font-reset');

      // Elements to apply fonts to
      const plaqueTitle = document.getElementById('plaque-title');
      const plaqueArtist = document.getElementById('plaque-artist');
      const sidebarLabel = document.querySelector('.sidebar-label');
      const sidebarText = document.getElementById('sidebar-text');

      // Toggle panel
      fontToggle.addEventListener('click', () => {
        fontTool.classList.toggle('is-open');
      });

      // Close panel when clicking outside
      document.addEventListener('click', (e) => {
        if (!fontTool.contains(e.target) && fontTool.classList.contains('is-open')) {
          fontTool.classList.remove('is-open');
        }
      });

      // Apply title font
      fontTitle.addEventListener('change', () => {
        const font = fontTitle.value;
        if (plaqueTitle) {
          plaqueTitle.style.fontFamily = font || '';
        }
      });

      // Apply artist font
      fontArtist.addEventListener('change', () => {
        const font = fontArtist.value;
        if (plaqueArtist) {
          plaqueArtist.style.fontFamily = font || '';
        }
        if (sidebarLabel) {
          sidebarLabel.style.fontFamily = font || '';
        }
      });

      // Apply description font
      fontDescription.addEventListener('change', () => {
        const font = fontDescription.value;
        if (sidebarText) {
          sidebarText.style.fontFamily = font || '';
        }
      });

      // Reset all fonts
      fontReset.addEventListener('click', () => {
        fontTitle.value = '';
        fontArtist.value = '';
        fontDescription.value = '';

        if (plaqueTitle) plaqueTitle.style.fontFamily = '';
        if (plaqueArtist) plaqueArtist.style.fontFamily = '';
        if (sidebarLabel) sidebarLabel.style.fontFamily = '';
        if (sidebarText) sidebarText.style.fontFamily = '';
      });
    })();
  </script>

  <!-- ====================================================================
       Y2K MUSIC PLAYER (YouTube Version)
       Retro portable media player with full custom controls
       ==================================================================== -->
  <div class="y2k-player" id="y2k-player">
    <div class="y2k-player__shell">
      <div class="y2k-player__body">

        <!-- Toggle handle -->
        <button class="y2k-player__toggle" id="y2k-toggle" aria-label="Toggle music player">
          <div class="y2k-player__grip">
            <span class="y2k-player__grip-line"></span>
            <span class="y2k-player__grip-line"></span>
            <span class="y2k-player__grip-line"></span>
          </div>
          <div class="y2k-player__lcd">
            <span class="y2k-player__lcd-dot" id="y2k-status-dot"></span>
            <span class="y2k-player__lcd-text" id="y2k-status-text">Ready</span>
          </div>
          <div class="y2k-player__arrow"></div>
        </button>

        <!-- Main content -->
        <div class="y2k-player__content">

          <!-- Track info LCD display -->
          <div class="y2k-player__display">
            <div class="y2k-player__display-inner">
              <div class="y2k-player__track-marquee">
                <span class="y2k-player__track-title" id="y2k-track-title">No track loaded</span>
              </div>
            </div>
          </div>

          <!-- Progress bar with inline time -->
          <div class="y2k-player__progress-row">
            <span class="y2k-player__time" id="y2k-current-time">0:00</span>
            <div class="y2k-player__progress" id="y2k-progress">
              <div class="y2k-player__progress-bar" id="y2k-progress-bar"></div>
              <div class="y2k-player__progress-handle" id="y2k-progress-handle"></div>
            </div>
            <span class="y2k-player__time" id="y2k-duration">0:00</span>
          </div>

          <!-- Controls row: buttons + volume + queue toggle -->
          <div class="y2k-player__controls-row">
            <div class="y2k-player__controls">
              <button class="y2k-player__btn" id="y2k-prev" title="Previous">
                <span class="y2k-player__btn-icon">⏮</span>
              </button>
              <button class="y2k-player__btn y2k-player__btn--play" id="y2k-play" title="Play">
                <span class="y2k-player__btn-icon" id="y2k-play-icon">▶</span>
              </button>
              <button class="y2k-player__btn" id="y2k-stop" title="Stop">
                <span class="y2k-player__btn-icon">⏹</span>
              </button>
              <button class="y2k-player__btn" id="y2k-next" title="Next">
                <span class="y2k-player__btn-icon">⏭</span>
              </button>
            </div>

            <div class="y2k-player__volume" id="y2k-volume" title="Volume">
              <div class="y2k-player__volume-bar" id="y2k-volume-bar"></div>
            </div>

            <button class="y2k-player__btn y2k-player__btn--queue" id="y2k-queue-toggle" title="Queue">
              <span class="y2k-player__btn-icon">≡</span>
            </button>
          </div>

          <!-- Queue panel (collapsible) -->
          <div class="y2k-player__queue" id="y2k-queue">
            <div class="y2k-player__queue-header">
              <span class="y2k-player__queue-title">Playlist</span>
              <span class="y2k-player__queue-count" id="y2k-queue-count">0 tracks</span>
            </div>
            <div class="y2k-player__queue-list" id="y2k-queue-list">
              <div class="y2k-player__queue-loading">Loading playlist...</div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Hidden YouTube player -->
    <div id="y2k-yt-container" style="position:absolute;left:-9999px;top:0;width:200px;height:200px;overflow:hidden;pointer-events:none;">
      <div id="y2k-yt-player"></div>
    </div>
  </div>

  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <!-- Y2K Player Controller -->
  <script>
    (function initY2KPlayer() {
      const PLAYLIST_ID = 'PLGl_0guG9m0iKPAfhpooMWA0zKESKkYN4';

      const playerContainer = document.getElementById('y2k-player');
      const toggleBtn = document.getElementById('y2k-toggle');

      const statusDot = document.getElementById('y2k-status-dot');
      const statusText = document.getElementById('y2k-status-text');
      const trackTitle = document.getElementById('y2k-track-title');
      const currentTimeEl = document.getElementById('y2k-current-time');
      const durationEl = document.getElementById('y2k-duration');
      const progressBar = document.getElementById('y2k-progress-bar');
      const progressHandle = document.getElementById('y2k-progress-handle');
      const progress = document.getElementById('y2k-progress');
      const volumeBar = document.getElementById('y2k-volume-bar');
      const volume = document.getElementById('y2k-volume');
      const playBtn = document.getElementById('y2k-play');
      const playIcon = document.getElementById('y2k-play-icon');
      const stopBtn = document.getElementById('y2k-stop');
      const prevBtn = document.getElementById('y2k-prev');
      const nextBtn = document.getElementById('y2k-next');

      let ytPlayer = null;
      let progressInterval = null;
      let isReady = false;

      if (toggleBtn && playerContainer) {
        toggleBtn.addEventListener('click', () => {
          playerContainer.classList.toggle('is-open');
        });
      }

      function formatTime(seconds) {
        if (!seconds || isNaN(seconds)) return '0:00';
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      }

      function updateProgress() {
        if (!ytPlayer || !isReady) return;
        try {
          const current = ytPlayer.getCurrentTime() || 0;
          const duration = ytPlayer.getDuration() || 1;
          const percent = (current / duration) * 100;

          progressBar.style.width = percent + '%';
          progressHandle.style.left = percent + '%';
          currentTimeEl.textContent = formatTime(current);
          durationEl.textContent = formatTime(duration);
        } catch (e) {}
      }

      function setStatus(state) {
        statusDot.className = 'y2k-player__lcd-dot ' + state;
        if (state === 'playing') {
          statusText.textContent = 'Playing';
          playIcon.textContent = '⏸';
        } else if (state === 'paused') {
          statusText.textContent = 'Paused';
          playIcon.textContent = '▶';
        } else {
          statusText.textContent = 'Ready';
          playIcon.textContent = '▶';
        }
      }

      function createPlayer() {
        if (ytPlayer) return;
        ytPlayer = new YT.Player('y2k-yt-player', {
          height: '200',
          width: '200',
          playerVars: {
            autoplay: 0,
            controls: 0,
            disablekb: 1,
            fs: 0,
            modestbranding: 1,
            rel: 0,
            origin: window.location.origin,
            listType: 'playlist',
            list: PLAYLIST_ID
          },
          events: {
            onReady: onPlayerReady,
            onStateChange: onPlayerStateChange,
            onError: onPlayerError
          }
        });
      }

      window.onYouTubeIframeAPIReady = function() {
        createPlayer();
      };

      if (typeof YT !== 'undefined' && YT.Player) {
        createPlayer();
      }

      function onPlayerReady(event) {
        isReady = true;
        setStatus('stopped');
        trackTitle.textContent = 'Press play to start';
        ytPlayer.setVolume(70);
        volumeBar.style.width = '70%';
        try { ytPlayer.setLoop(true); } catch (e) {}
        setTimeout(updateTrackInfo, 1000);
        setTimeout(buildQueue, 1500);
      }

      function onPlayerStateChange(event) {
        clearInterval(progressInterval);
        switch (event.data) {
          case YT.PlayerState.PLAYING:
            setStatus('playing');
            updateTrackInfo();
            progressInterval = setInterval(updateProgress, 500);
            break;
          case YT.PlayerState.PAUSED:
            setStatus('paused');
            updateTrackInfo();
            break;
          case YT.PlayerState.ENDED:
            setStatus('stopped');
            break;
          case YT.PlayerState.BUFFERING:
            statusText.textContent = 'Loading...';
            setTimeout(updateTrackInfo, 300);
            break;
          case YT.PlayerState.CUED:
            setStatus('stopped');
            updateTrackInfo();
            ytPlayer.playVideo();
            break;
          default:
            setStatus('stopped');
        }
      }

      function onPlayerError(event) {
        trackTitle.textContent = 'Skipping...';
        setStatus('stopped');
        setTimeout(() => {
          if (ytPlayer && isReady) ytPlayer.nextVideo();
        }, 1500);
      }

      function updateTrackInfo() {
        if (!ytPlayer || !isReady) return;
        try {
          const videoData = ytPlayer.getVideoData();
          if (videoData && videoData.title) {
            setTrackTitle(videoData.title);
          } else {
            setTrackTitle('Loading...');
          }
        } catch (e) {
          setTrackTitle('YouTube Playlist');
        }
      }

      function setTrackTitle(title) {
        const marqueeContainer = document.querySelector('.y2k-player__track-marquee');
        const maxWidth = marqueeContainer ? marqueeContainer.offsetWidth : 200;
        const measureSpan = document.createElement('span');
        measureSpan.style.cssText = 'position:absolute;visibility:hidden;white-space:nowrap;font-size:0.75rem;letter-spacing:0.02em;';
        measureSpan.textContent = title;
        document.body.appendChild(measureSpan);
        const textWidth = measureSpan.offsetWidth;
        document.body.removeChild(measureSpan);

        if (textWidth > maxWidth - 10) {
          trackTitle.innerHTML = title + '<span style="padding:0 30px;">•</span>' + title;
          trackTitle.classList.add('scrolling');
        } else {
          trackTitle.textContent = title;
          trackTitle.classList.remove('scrolling');
        }
      }

      playBtn?.addEventListener('click', () => {
        if (!ytPlayer || !isReady) {
          trackTitle.textContent = 'Loading player...';
          return;
        }
        const state = ytPlayer.getPlayerState();
        if (state === YT.PlayerState.PLAYING) {
          ytPlayer.pauseVideo();
        } else {
          statusText.textContent = 'Loading...';
          ytPlayer.playVideo();
        }
      });

      stopBtn?.addEventListener('click', () => {
        if (!ytPlayer || !isReady) return;
        ytPlayer.stopVideo();
        progressBar.style.width = '0%';
        progressHandle.style.left = '0%';
        currentTimeEl.textContent = '0:00';
        setStatus('stopped');
      });

      prevBtn?.addEventListener('click', () => {
        if (!ytPlayer || !isReady) return;
        trackTitle.textContent = 'Loading...';
        statusText.textContent = 'Loading...';
        try {
          const playlist = ytPlayer.getPlaylist();
          const index = ytPlayer.getPlaylistIndex();
          if (index === 0 && playlist && playlist.length > 0) {
            ytPlayer.playVideoAt(playlist.length - 1);
          } else {
            ytPlayer.previousVideo();
          }
        } catch (e) {}
      });

      nextBtn?.addEventListener('click', () => {
        if (!ytPlayer || !isReady) return;
        trackTitle.textContent = 'Loading...';
        statusText.textContent = 'Loading...';
        try {
          const playlist = ytPlayer.getPlaylist();
          const index = ytPlayer.getPlaylistIndex();
          if (playlist && index >= playlist.length - 1) {
            ytPlayer.playVideoAt(0);
          } else {
            ytPlayer.nextVideo();
          }
        } catch (e) {}
      });

      progress?.addEventListener('click', (e) => {
        if (!ytPlayer || !isReady) return;
        const rect = progress.getBoundingClientRect();
        const percent = (e.clientX - rect.left) / rect.width;
        const duration = ytPlayer.getDuration();
        ytPlayer.seekTo(percent * duration, true);
      });

      volume?.addEventListener('click', (e) => {
        if (!ytPlayer || !isReady) return;
        const rect = volume.getBoundingClientRect();
        const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        ytPlayer.setVolume(percent * 100);
        volumeBar.style.width = (percent * 100) + '%';
      });

      const queueToggle = document.getElementById('y2k-queue-toggle');
      const queuePanel = document.getElementById('y2k-queue');
      const queueList = document.getElementById('y2k-queue-list');
      const queueCount = document.getElementById('y2k-queue-count');

      queueToggle?.addEventListener('click', () => {
        queuePanel.classList.toggle('is-open');
        queueToggle.classList.toggle('is-active');
      });

      function buildQueue() {
        if (!ytPlayer || !isReady) return;
        try {
          const playlist = ytPlayer.getPlaylist();
          if (!playlist || playlist.length === 0) {
            setTimeout(buildQueue, 2000);
            return;
          }
          queueCount.textContent = playlist.length + ' tracks';
          queueList.innerHTML = '';
          playlist.forEach((videoId, index) => {
            const item = document.createElement('div');
            item.className = 'y2k-player__queue-item';
            item.dataset.index = index;
            item.dataset.videoId = videoId;
            item.innerHTML = `
              <span class="y2k-player__queue-num">${String(index + 1).padStart(2, '0')}</span>
              <span class="y2k-player__queue-name" data-video-id="${videoId}">Track ${index + 1}</span>
            `;
            item.addEventListener('click', () => {
              ytPlayer.playVideoAt(index);
              updateQueueHighlight(index);
            });
            queueList.appendChild(item);
          });
          updateQueueHighlight(ytPlayer.getPlaylistIndex());
          fetchVideoTitles(playlist);
        } catch (e) {
          queueList.innerHTML = '<div class="y2k-player__queue-loading">Could not load playlist</div>';
        }
      }

      async function fetchVideoTitles(videoIds) {
        for (let i = 0; i < videoIds.length; i++) {
          try {
            const response = await fetch(`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${videoIds[i]}&format=json`);
            if (response.ok) {
              const data = await response.json();
              const nameEl = queueList.querySelector(`[data-video-id="${videoIds[i]}"]`);
              if (nameEl && data.title) nameEl.textContent = data.title;
            }
          } catch (e) {}
          await new Promise(r => setTimeout(r, 100));
        }
      }

      function updateQueueHighlight(index) {
        if (!queueList) return;
        queueList.querySelectorAll('.y2k-player__queue-item').forEach(item => {
          item.classList.remove('is-playing');
          const icon = item.querySelector('.y2k-player__queue-playing-icon');
          if (icon) icon.remove();
        });
        const currentItem = queueList.querySelector(`[data-index="${index}"]`);
        if (currentItem) {
          currentItem.classList.add('is-playing');
          const icon = document.createElement('span');
          icon.className = 'y2k-player__queue-playing-icon';
          icon.textContent = '♪';
          currentItem.appendChild(icon);
          currentItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
      }

      const originalOnStateChange = onPlayerStateChange;
      onPlayerStateChange = function(event) {
        originalOnStateChange(event);
        if (event.data === YT.PlayerState.PLAYING) {
          const index = ytPlayer.getPlaylistIndex();
          updateQueueHighlight(index);
        }
      };
    })();
  </script>

</body>
</html>
